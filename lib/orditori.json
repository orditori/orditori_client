{
  "info": {
    "description": "API for various user-related data and stats",
    "title": "User Statistics API",
    "version": "0.0.1"
  },
  "paths": {
    "/notebooks": {
      "get": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": { "$ref": "#/components/schemas/NotebookR" }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `apiKey`" }
        }
      },
      "post": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          },
          {
            "in": "query",
            "name": "adminKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": { "$ref": "#/components/schemas/NotebookR" }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `adminKey` or `apiKey`" }
        }
      }
    },
    "/notebookEntries": {
      "post": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json;charset=utf-8": {
              "schema": { "$ref": "#/components/schemas/NotebookEntryW" }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "maximum": 9223372036854775807,
                  "minimum": -9223372036854775808,
                  "type": "integer"
                }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `body` or `apiKey`" }
        }
      }
    },
    "/notebookEntries/{entryId}": {
      "delete": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          },
          {
            "in": "path",
            "name": "entryId",
            "required": true,
            "schema": {
              "maximum": 9223372036854775807,
              "minimum": -9223372036854775808,
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "example": [],
                  "items": {},
                  "maxItems": 0,
                  "type": "array"
                }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `apiKey`" },
          "404": { "description": "`entryId` not found" }
        }
      }
    },
    "/definitions": {
      "get": {
        "parameters": [
          {
            "in": "query",
            "name": "query",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DefinitionsWithSource"
                  },
                  "type": "array"
                }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `query`" }
        }
      }
    },
    "/definitionContentItems": {
      "post": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json;charset=utf-8": {
              "schema": {
                "$ref": "#/components/schemas/DefinitionContentItemW"
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "maximum": 9223372036854775807,
                  "minimum": -9223372036854775808,
                  "type": "integer"
                }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `body` or `apiKey`" }
        }
      }
    },
    "/exercises/definition/random": {
      "get": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          },
          {
            "in": "query",
            "name": "language",
            "required": false,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": { "$ref": "#/components/schemas/DefinitionExerciseR" }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `language` or `apiKey`" }
        }
      }
    },
    "/exercises/definition/solutions": {
      "post": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json;charset=utf-8": {
              "schema": {
                "$ref": "#/components/schemas/ExerciseSolution_DefinitionExercise"
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": { "$ref": "#/components/schemas/SolutionCheckResult" }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `body` or `apiKey`" }
        }
      }
    },
    "/exercises/definition/scores": {
      "get": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DefinitionExerciseStats_DefinitionExercise"
                  },
                  "type": "array"
                }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `apiKey`" }
        }
      }
    },
    "/exercises/example/random": {
      "get": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "$ref": "#/components/schemas/DefinitionExampleExerciseR"
                }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `apiKey`" }
        }
      }
    },
    "/exercises/example/solutions": {
      "post": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "requestBody": {
          "content": {
            "application/json;charset=utf-8": {
              "schema": {
                "$ref": "#/components/schemas/ExerciseSolution_DefinitionExampleExercise"
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": { "$ref": "#/components/schemas/SolutionCheckResult" }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `body` or `apiKey`" }
        }
      }
    },
    "/exercises/example/scores": {
      "get": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DefinitionExerciseStats_DefinitionExampleExercise"
                  },
                  "type": "array"
                }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `apiKey`" }
        }
      }
    },
    "/userStatistics": {
      "get": {
        "parameters": [
          {
            "in": "query",
            "name": "apiKey",
            "required": true,
            "schema": { "format": "uuid", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json;charset=utf-8": {
                "schema": { "$ref": "#/components/schemas/UserStatisticsR" }
              }
            },
            "description": ""
          },
          "400": { "description": "Invalid `apiKey`" }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "NotebookR": {
        "description": "A notebook with its entries",
        "properties": {
          "apiKey": { "$ref": "#/components/schemas/UUID" },
          "entries": {
            "items": { "$ref": "#/components/schemas/NotebookEntryR" },
            "type": "array"
          },
          "formatVersion": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "revision": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          }
        },
        "required": ["id", "apiKey", "revision", "formatVersion", "entries"],
        "type": "object"
      },
      "UUID": {
        "example": "00000000-0000-0000-0000-000000000000",
        "format": "uuid",
        "type": "string"
      },
      "NotebookEntryR": {
        "description": "A notebook entry",
        "properties": {
          "addedDate": { "$ref": "#/components/schemas/UTCTime" },
          "definitions": {
            "items": { "$ref": "#/components/schemas/DefinitionContentItemR" },
            "type": "array"
          },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          }
        },
        "required": ["id", "addedDate", "definitions"],
        "type": "object"
      },
      "UTCTime": {
        "example": "2016-07-22T00:00:00Z",
        "format": "yyyy-mm-ddThh:MM:ssZ",
        "type": "string"
      },
      "DefinitionContentItemR": {
        "description": "A notebook entry definition item",
        "properties": {
          "definition": { "type": "string" },
          "definitionId": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "definitionSource": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "examples": {
            "items": { "$ref": "#/components/schemas/DefinitionExample" },
            "type": "array"
          },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "language": { "$ref": "#/components/schemas/Language" },
          "partOfSpeech": { "$ref": "#/components/schemas/PartOfSpeech" },
          "sourceLink": { "type": "string" },
          "word": { "type": "string" }
        },
        "required": [
          "id",
          "word",
          "language",
          "definitionId",
          "definition",
          "definitionSource",
          "sourceLink",
          "examples"
        ],
        "type": "object"
      },
      "PartOfSpeech": {
        "enum": [
          "Noun",
          "ProperNoun",
          "Verb",
          "Adjective",
          "Adverb",
          "Pronoun",
          "Preposition",
          "Conjunction",
          "Interjection",
          "Article",
          "Determiner"
        ],
        "type": "string"
      },
      "Language": {
        "description": "A language with its ISO639-3 code and name in English",
        "properties": {
          "code": { "type": "string" },
          "name": { "type": "string" }
        },
        "required": ["code", "name"],
        "type": "object"
      },
      "DefinitionExample": {
        "description": "A notebook entry definition example",
        "properties": {
          "definition": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "string": { "type": "string" },
          "translation": { "type": "string" }
        },
        "required": ["id", "definition", "string"],
        "type": "object"
      },
      "NotebookEntryW": {
        "description": "A notebook entry payload",
        "properties": {
          "addedDate": { "$ref": "#/components/schemas/UTCTime" },
          "notebook": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          }
        },
        "required": ["notebook", "addedDate"],
        "type": "object"
      },
      "DefinitionsWithSource": {
        "description": "Definitions together with their source information",
        "properties": {
          "definitionSource": {
            "$ref": "#/components/schemas/DefinitionSource"
          },
          "definitions": {
            "items": { "$ref": "#/components/schemas/DefinitionR" },
            "type": "array"
          }
        },
        "required": ["definitions", "definitionSource"],
        "type": "object"
      },
      "DefinitionR": {
        "description": "Definition with examples",
        "properties": {
          "definition": { "type": "string" },
          "examples": {
            "items": { "$ref": "#/components/schemas/DefinitionExample" },
            "type": "array"
          },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "language": { "$ref": "#/components/schemas/Language" },
          "partOfSpeech": { "$ref": "#/components/schemas/PartOfSpeech" },
          "sourceLink": { "type": "string" },
          "word": { "type": "string" }
        },
        "required": [
          "id",
          "word",
          "language",
          "definition",
          "sourceLink",
          "examples"
        ],
        "type": "object"
      },
      "DefinitionSource": {
        "description": "A definition source (e.g. English Wiktionary)",
        "properties": {
          "description": { "type": "string" },
          "extractorRevision": { "$ref": "#/components/schemas/UTCTime" },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "name": { "type": "string" },
          "scrapeUrl": { "type": "string" }
        },
        "required": [
          "id",
          "name",
          "description",
          "scrapeUrl",
          "extractorRevision"
        ],
        "type": "object"
      },
      "DefinitionContentItemW": {
        "description": "A definition content item payload",
        "properties": {
          "definition": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "entry": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          }
        },
        "required": ["entry", "definition"],
        "type": "object"
      },
      "DefinitionExerciseR": {
        "description": "A definition-based exercise",
        "example": {
          "definition": "later today, shortly, in a moment",
          "difficultyScore": 0.37,
          "id": 0,
          "language": { "code": "nld", "name": "Dutch" },
          "options": ["strax", "zojuist", "zonet"]
        },
        "properties": {
          "definition": { "type": "string" },
          "difficultyScore": { "format": "double", "type": "number" },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "language": { "$ref": "#/components/schemas/Language" },
          "options": { "items": { "type": "string" }, "type": "array" }
        },
        "required": [
          "id",
          "language",
          "definition",
          "difficultyScore",
          "options"
        ],
        "type": "object"
      },
      "SolutionCheckResult": {
        "description": "A result of checking correctness of a solution",
        "oneOf": [
          {
            "properties": {
              "contents": { "type": "string" },
              "tag": { "enum": ["Incorrect"], "type": "string" }
            },
            "required": ["tag", "contents"],
            "type": "object"
          },
          {
            "properties": {
              "contents": {
                "items": { "$ref": "#/components/schemas/FuzzyCompareToken" },
                "type": "array"
              },
              "tag": { "enum": ["Correct"], "type": "string" }
            },
            "required": ["tag", "contents"],
            "type": "object"
          }
        ]
      },
      "FuzzyCompareToken": {
        "description": "A result of checking correctness of a solution ",
        "example": { "contents": "ß", "tag": "Character" },
        "oneOf": [
          {
            "properties": {
              "contents": { "type": "string" },
              "tag": { "enum": ["Character"], "type": "string" }
            },
            "required": ["tag", "contents"],
            "type": "object"
          },
          {
            "properties": {
              "contents": { "$ref": "#/components/schemas/FuzzyCompareIssue" },
              "tag": { "enum": ["Issue"], "type": "string" }
            },
            "required": ["tag", "contents"],
            "type": "object"
          }
        ]
      },
      "FuzzyCompareIssue": {
        "description": "Partial character match when fuzzy-comparing strings",
        "example": { "actual": "ue", "expected": "Ü" },
        "properties": {
          "actual": { "type": "string" },
          "expected": { "type": "string" }
        },
        "required": ["expected", "actual"],
        "type": "object"
      },
      "ExerciseSolution_DefinitionExercise": {
        "description": "A user's solution to an exercise, text input",
        "example": { "exercise": 0, "input": "straks" },
        "properties": {
          "exercise": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "input": { "type": "string" }
        },
        "required": ["exercise", "input"],
        "type": "object"
      },
      "DefinitionExerciseStats_DefinitionExercise": {
        "description": "Solution and difficulty statistics for a definition-based exercise",
        "properties": {
          "correct": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "definition": { "$ref": "#/components/schemas/Definition" },
          "difficultyScore": { "format": "double", "type": "number" },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "incorrect": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          }
        },
        "required": [
          "id",
          "definition",
          "difficultyScore",
          "correct",
          "incorrect"
        ],
        "type": "object"
      },
      "Definition": {
        "description": "A dictionary definition of a word",
        "properties": {
          "definition": { "type": "string" },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "language": { "type": "string" },
          "page": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "partOfSpeech": { "$ref": "#/components/schemas/PartOfSpeech" },
          "sourceLink": { "type": "string" },
          "word": { "type": "string" }
        },
        "required": [
          "id",
          "page",
          "word",
          "language",
          "definition",
          "sourceLink"
        ],
        "type": "object"
      },
      "DefinitionExampleExerciseR": {
        "description": "A definition example exercise",
        "properties": {
          "definition": { "type": "string" },
          "difficultyScore": { "format": "double", "type": "number" },
          "example": {
            "items": { "$ref": "#/components/schemas/StringOrGap" },
            "type": "array"
          },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "language": { "$ref": "#/components/schemas/Language" }
        },
        "required": [
          "id",
          "language",
          "definition",
          "example",
          "difficultyScore"
        ],
        "type": "object"
      },
      "StringOrGap": {
        "description": "A token in a string with gaps",
        "oneOf": [
          {
            "properties": {
              "contents": {
                "maximum": 9223372036854775807,
                "minimum": -9223372036854775808,
                "type": "integer"
              },
              "tag": { "enum": ["Gap"], "type": "string" }
            },
            "required": ["tag", "contents"],
            "type": "object"
          },
          {
            "properties": {
              "contents": { "type": "string" },
              "tag": { "enum": ["String"], "type": "string" }
            },
            "required": ["tag", "contents"],
            "type": "object"
          }
        ]
      },
      "ExerciseSolution_DefinitionExampleExercise": {
        "description": "A user's solution to an exercise, text input",
        "example": { "exercise": 0, "input": "straks" },
        "properties": {
          "exercise": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "input": { "type": "string" }
        },
        "required": ["exercise", "input"],
        "type": "object"
      },
      "DefinitionExerciseStats_DefinitionExampleExercise": {
        "description": "Solution and difficulty statistics for a definition-based exercise",
        "properties": {
          "correct": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "definition": { "$ref": "#/components/schemas/Definition" },
          "difficultyScore": { "format": "double", "type": "number" },
          "id": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          },
          "incorrect": {
            "maximum": 9223372036854775807,
            "minimum": -9223372036854775808,
            "type": "integer"
          }
        },
        "required": [
          "id",
          "definition",
          "difficultyScore",
          "correct",
          "incorrect"
        ],
        "type": "object"
      },
      "UserStatisticsR": {
        "description": "User statistics",
        "properties": {
          "apiKey": { "$ref": "#/components/schemas/UUID" },
          "languages": {
            "items": { "$ref": "#/components/schemas/Language" },
            "type": "array"
          }
        },
        "required": ["apiKey", "languages"],
        "type": "object"
      }
    }
  },
  "openapi": "3.0.0"
}
